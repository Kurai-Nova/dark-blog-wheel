import React, { useState, useEffect } from "react";
import { useLocation } from "react-router-dom";
import MarkdownRenderer from "../components/MarkdownRenderer/MarkdownRenderer";

const Library: React.FC = () => {
  const location = useLocation();
  const [currentPath, setCurrentPath] = useState<string>('');

  useEffect(() => {
    // –ò–∑–≤–ª–µ–∫–∞–µ–º –ø—É—Ç—å –∏–∑ hash —á–∞—Å—Ç–∏ URL
    const hash = location.hash.substring(1); // —É–±–∏—Ä–∞–µ–º #
    if (hash) {
      setCurrentPath(`/library/${hash}`);
    } else {
      setCurrentPath('');
    }
  }, [location]);

  return (
    <div>
      <div className="brand-header">–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞</div>
      <div className="blog-main">
        {!currentPath ? (
          <>
            <h2 className="library-main-title">–ú–æ—è —Ü–∏—Ñ—Ä–æ–≤–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞</h2>
            
            <div className="library-section">
              <h3 className="library-section-title">üìö –ö–Ω–∏–≥–∏ –ø–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—é</h3>
              <ul className="library-list">
                <li className="library-item">
                  <span className="library-title">"–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥"</span> ‚Äî –ú–∞—Ä—Ç–∏–Ω –§–∞—É–ª–µ—Ä
                  <div className="library-description">–ü—Ä–∞–∫—Ç–∏–∫–∞ —É–ª—É—á—à–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–æ–¥–∞ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –µ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏.</div>
                </li>
                <li className="library-item">
                  <span className="library-title">"–ß–∏—Å—Ç—ã–π –∫–æ–¥"</span> ‚Äî –†–æ–±–µ—Ä—Ç –ú–∞—Ä—Ç–∏–Ω
                  <div className="library-description">–ö–∞–∫ –ø–∏—Å–∞—Ç—å –ø—Ä–æ—Å—Ç–æ–π, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π –∏ –ø–æ–Ω—è—Ç–Ω—ã–π –∫–æ–¥.</div>
                </li>
                <li className="library-item">
                  <span className="library-title">"You Don't Know JS"</span> ‚Äî –ö–∞–π–ª –°–∏–º–ø—Å–æ–Ω
                  <div className="library-description">–ì–ª—É–±–æ–∫–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ JavaScript –∏ –µ–≥–æ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π.</div>
                </li>
              </ul>
            </div>

            <div className="library-section">
              <h3 className="library-section-title">üìÑ –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Ç–∞—Ç—å–∏</h3>
              <ul className="library-list">
                <li className="library-item">
                  <a href="https://reactjs.org/docs" className="library-link">–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è React</a>
                  <div className="library-description">–õ—É—á—à–∏–π –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è React –æ—Ç —Å–æ–∑–¥–∞—Ç–µ–ª–µ–π.</div>
                </li>
                <li className="library-item">
                  <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript" className="library-link">MDN JavaScript Guide</a>
                  <div className="library-description">–ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ JavaScript –æ—Ç Mozilla.</div>
                </li>
                <li className="library-item">
                  <a href="https://css-tricks.com" className="library-link">CSS-Tricks</a>
                  <div className="library-description">–û—Ç–ª–∏—á–Ω—ã–µ —Å—Ç–∞—Ç—å–∏ –∏ —Ç—Ä—é–∫–∏ –ø–æ CSS –∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—É.</div>
                </li>
              </ul>
            </div>
          </>
        ) : (
          <MarkdownRenderer path={currentPath} />
        )}
      </div>
    </div>
  );
};

export default Library;
